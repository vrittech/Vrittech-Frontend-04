<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>DASHBOARD</title>
  </head>
  <body>
    <div class="container">
      <button
        type="button"
        class="btn btn-outline-primary"
        data-bs-toggle="modal"
        data-bs-target="#exampleModal"
      >
        Add Product
      </button>
      <div id="container"></div>
      <!-- Modal -->
      <div
        class="modal fade"
        id="exampleModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">
                Add Product Form
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="form-floating mb-3">
                <input
                  type="text"
                  class="form-control"
                  id="imageURL"
                  placeholder="Enter image url here"
                />
                <label for="imageURL">Product Image URL</label>
              </div>
              <div class="form-floating mb-3">
                <input
                  type="text"
                  class="form-control"
                  id="title"
                  placeholder="Product Title"
                />
                <label for="title">Product Title</label>
              </div>
              <div class="row mb-3">
                <div class="col-6">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control"
                      id="price"
                      placeholder="Product price"
                    />
                    <label for="price">Product price</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="category"
                      placeholder="Product category"
                    />
                    <label for="category">Product category</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="form-floating">
                  <textarea
                    class="form-control"
                    placeholder="Product Description"
                    id="description"
                  ></textarea>
                  <label for="description">Description</label>
                </div>
              </div>
            </div>

            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
                id="closebtn"
              >
                Close
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="addProduct()"
              >
                Add Product
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // fetch("https://dummyjson.com/products")
      //   .then((resp) => {
      //     return resp.json();
      //   })
      //   .then((value) => {
      //     console.log(value);
      //   });

      const container = document.getElementById("container");
      container.style.display = "flex";
      container.style.flexWrap = "wrap";
      container.style.gap = "30px";

      const fetchProducts = async () => {
        const resp = await fetch("https://dummyjson.com/products");
        const { products } = await resp.json();

        for (let product of products) {
          const card = document.createElement("div");
          card.style.width = "22%";
          card.style.height = "400px";
          card.className = "card d-flex";

          const cardHeader = document.createElement("div");
          cardHeader.className = "card-header h-50";

          const image = document.createElement("img");
          image.src = product.thumbnail;
          image.classList = "h-100 w-100";

          cardHeader.append(image);

          card.append(cardHeader);

          const h2 = document.createElement("h2");
          h2.innerText =
            product.title.length > 14
              ? product.title.slice(0, 13) + "..."
              : product.title;

          card.append(h2);

          const p = document.createElement("p");
          p.innerText = product.description;

          card.append(p);

          container.append(card);
        }
      };

      fetchProducts();

      function addProduct() {
        const imageURL = document.querySelector("#imageURL").value;
        const title = document.querySelector("#title").value;

        const description = document.querySelector("#description").value;

        const card = document.createElement("div");
        card.style.width = "22%";
        card.style.height = "400px";
        card.className = "card";

        const cardHeader = document.createElement("div");
        cardHeader.className = "card-header h-50";

        const image = document.createElement("img");
        image.src = imageURL;
        image.classList = "h-100 w-100";

        cardHeader.append(image);

        card.append(cardHeader);

        const h2 = document.createElement("h2");
        h2.innerText = title.length > 14 ? title.slice(0, 13) + "..." : title;

        card.append(h2);

        const p = document.createElement("p");
        p.innerText = description;

        card.append(p);

        container.append(card);

        document.getElementById("closebtn").click();

        // console.log({
        //   imageURL,
        //   title,
        //   price,
        //   category,
        //   description,
        // });
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
